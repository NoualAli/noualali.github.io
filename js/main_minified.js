const APP={config:{loaderDuration:1000,scrollOffset:100,observerThreshold:0.1},elements:{loader:document.querySelector('.loader'),navbar:document.querySelector('.navbar'),hamburger:document.querySelector('.navbar__hamburger'),navMenu:document.querySelector('.navbar__menu'),navLinks:document.querySelectorAll('.nav-link'),sections:document.querySelectorAll('section[id]'),copyYear:document.querySelector('#copyYear')},state:{lastScrollY:window.scrollY,isNavOpen:!1}};document.addEventListener('DOMContentLoaded',()=>{const initApp=()=>{APP.utils.updateCopyrightYear();APP.loader.init();APP.navigation.init();APP.animations.init();APP.contactForm.init()};initApp()});APP.utils={updateCopyrightYear(){if(!APP.elements.copyYear)return;const currentYear=new Date().getFullYear();APP.elements.copyYear.setAttribute('datetime',currentYear);APP.elements.copyYear.textContent=currentYear},debounce(func,wait){let timeout;return function executedFunction(...args){const later=()=>{clearTimeout(timeout);func(...args)};clearTimeout(timeout);timeout=setTimeout(later,wait)}}};APP.loader={init(){if(!APP.elements.loader)return;window.addEventListener('load',()=>{document.body.style.overflow='hidden';setTimeout(()=>{APP.elements.loader.classList.remove('is-loading');setTimeout(()=>{APP.elements.loader.remove();document.body.style.overflow='auto'},500)},APP.config.loaderDuration)})}};APP.navigation={init(){this._setupMobileNavigation();this._setupSmoothScroll();this._setupActiveNavigation();this._setupNavbarScroll()},_setupMobileNavigation(){const{hamburger,navMenu,navLinks}=APP.elements;if(!hamburger||!navMenu)return;hamburger.addEventListener('click',()=>{this._toggleMobileMenu()});navLinks.forEach(link=>{link.addEventListener('click',()=>{this._closeMobileMenu()})})},_setupSmoothScroll(){APP.elements.navLinks.forEach(link=>{link.addEventListener('click',(e)=>{e.preventDefault();const targetId=link.getAttribute('href');this._scrollToSection(targetId)})})},_setupActiveNavigation(){const updateActiveNav=APP.utils.debounce(()=>{let currentSectionId='';const scrollY=window.pageYOffset+APP.config.scrollOffset;APP.elements.sections.forEach(section=>{const sectionHeight=section.offsetHeight;const sectionTop=section.offsetTop-APP.config.scrollOffset;const sectionId=section.getAttribute('id');if(scrollY>=sectionTop&&scrollY<sectionTop+sectionHeight){currentSectionId=sectionId}});APP.elements.navLinks.forEach(link=>{link.classList.remove('is-active');if(link.getAttribute('href')===`#${currentSectionId}`){link.classList.add('is-active')}});if(currentSectionId){history.replaceState(null,null,`#${currentSectionId}`)}},100);window.addEventListener('scroll',updateActiveNav);window.addEventListener('popstate',updateActiveNav);updateActiveNav()},_setupNavbarScroll(){window.addEventListener('scroll',APP.utils.debounce(()=>{const{navbar}=APP.elements;if(window.scrollY>100){navbar.style.background='rgba(15, 15, 15, 0.95)';navbar.style.backdropFilter='blur(10px)'}else{navbar.style.background='var(--black)';navbar.style.backdropFilter='none'}},10))},_scrollToSection(targetId){const targetSection=document.querySelector(targetId);if(targetSection){targetSection.scrollIntoView({behavior:'smooth',block:'start'});history.pushState(null,null,targetId)}},_toggleMobileMenu(){const{hamburger,navMenu}=APP.elements;hamburger.classList.toggle('is-active');navMenu.classList.toggle('is-active');APP.state.isNavOpen=!APP.state.isNavOpen},_closeMobileMenu(){const{hamburger,navMenu}=APP.elements;hamburger.classList.remove('is-active');navMenu.classList.remove('is-active');APP.state.isNavOpen=!1}};APP.animations={init(){this._setupScrollAnimations();this._setupSkillsAnimations();this._createParticles();this._preloadImages()},_setupScrollAnimations(){const observerOptions={threshold:APP.config.observerThreshold,rootMargin:'0px 0px -50px 0px'};const observer=new IntersectionObserver((entries)=>{entries.forEach(entry=>{if(entry.isIntersecting){entry.target.classList.add('is-animated')}})},observerOptions);document.querySelectorAll('.animate-on-scroll').forEach(el=>{observer.observe(el)})},_setupSkillsAnimations(){const observerOptions={threshold:0.5,rootMargin:'0px 0px -100px 0px'};const skillsObserver=new IntersectionObserver((entries)=>{entries.forEach(entry=>{if(entry.isIntersecting){const level=entry.target.getAttribute('data-level');entry.target.style.setProperty('--skill-level',level+'%');entry.target.classList.add('is-animated')}})},observerOptions);document.querySelectorAll('.skill-category__level').forEach(skill=>{skillsObserver.observe(skill)})},_createParticles(){const hero=document.querySelector('.hero');if(!hero)return;document.querySelectorAll('.particle').forEach(p=>p.remove());for(let i=0;i<50;i++){const particle=document.createElement('div');particle.className='particle';particle.style.cssText=`
                position: absolute;
                width: 2px;
                height: 2px;
                background: var(--gold);
                border-radius: 50%;
                top: ${Math.random() * 100}%;
                left: ${Math.random() * 100}%;
                opacity: ${Math.random() * 0.3};
                animation: float ${8 + Math.random() * 12}s linear infinite;
                animation-delay: ${Math.random() * 5}s;
            `;hero.appendChild(particle)}},_preloadImages(){const images=document.querySelectorAll('img');images.forEach(img=>{if(img.complete){img.classList.add('is-loaded')}else{img.addEventListener('load',()=>{img.classList.add('is-loaded')});img.addEventListener('error',()=>{console.warn(`Image failed to load: ${img.src}`)})}})}};APP.contactForm={init(){const contactForm=document.getElementById('contactForm');if(!contactForm)return;contactForm.addEventListener('submit',(e)=>{this._handleFormSubmit(e)});this._initNotifications()},_initNotifications(){const errorCloseBtn=document.querySelector('.error-banner__close');if(errorCloseBtn){errorCloseBtn.addEventListener('click',()=>this._hideErrorBanner())}
const successToast=document.getElementById('successToast');if(successToast){successToast.addEventListener('click',()=>this._hideSuccessToast())}},_handleFormSubmit(e){e.preventDefault();const submitBtn=e.target.querySelector('button[type="submit"]');const originalText=submitBtn.innerHTML;this._hideErrorBanner();this._hideSuccessToast();submitBtn.innerHTML='<span class="material-icons">hourglass_empty</span> Envoi en cours...';submitBtn.disabled=!0;const formData={name:e.target.querySelector('#name').value.trim(),email:e.target.querySelector('#email').value.trim(),subject:e.target.querySelector('#subject').value.trim(),message:e.target.querySelector('#message').value.trim(),website:e.target.querySelector('#website')?e.target.querySelector('#website').value.trim():''};const scriptUrl='https://script.google.com/macros/s/AKfycbylYhHk4wUeEs4MCasAAEaBCEei1zNL3BH_r9V68Ud-uVhd1xDYrifHn9BFX8ceD4TqoA/exec';fetch(scriptUrl,{method:'POST',headers:{'Content-Type':'application/json',},body:JSON.stringify(formData)}).then(response=>response.json()).then(data=>{if(data.status==='success'){this._showFormSuccess(submitBtn,originalText);e.target.reset()}else{throw new Error(data.message)}}).catch(error=>{console.error('Erreur:',error);this._showFormError(error,submitBtn,originalText)})},_showFormSuccess(submitBtn,originalText){this._showSuccessToast();submitBtn.innerHTML='<span class="material-icons">check</span> Message envoyé !';submitBtn.style.backgroundColor='#2ed573';setTimeout(()=>{submitBtn.innerHTML=originalText;submitBtn.style.backgroundColor='';submitBtn.disabled=!1},3000)},_showFormError(error,submitBtn,originalText){let errorMessage='Erreur lors de l\'envoi du message. Veuillez réessayer.';if(error.message.includes('Accès refusé')){errorMessage='Erreur de sécurité. Veuillez actualiser la page.'}else if(error.message.includes('Données manquantes')){errorMessage='Veuillez remplir tous les champs obligatoires.'}else if(error.message.includes('Email invalide')){errorMessage='Veuillez saisir une adresse email valide.'}else if(error.message.includes('Erreur serveur')){errorMessage='Erreur temporaire du serveur. Veuillez réessayer plus tard.'}
this._showErrorBanner(errorMessage);submitBtn.innerHTML=originalText;submitBtn.disabled=!1},_showErrorBanner(message){const errorBanner=document.getElementById('errorBanner');const errorMessage=document.getElementById('errorMessage');if(errorBanner&&errorMessage){errorMessage.textContent=message;errorBanner.style.display='block';errorBanner.focus();setTimeout(()=>{this._hideErrorBanner()},8000)}},_hideErrorBanner(){const errorBanner=document.getElementById('errorBanner');if(errorBanner){errorBanner.style.display='none'}},_showSuccessToast(){const successToast=document.getElementById('successToast');if(successToast){successToast.classList.add('show');setTimeout(()=>{this._hideSuccessToast()},5000)}},_hideSuccessToast(){const successToast=document.getElementById('successToast');if(successToast){successToast.classList.remove('show')}}};window.addEventListener('error',(e)=>{console.error('Erreur JavaScript:',e.error)});if(typeof module!=='undefined'&&module.exports){module.exports=APP}